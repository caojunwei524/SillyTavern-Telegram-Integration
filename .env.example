# SillyTavern Telegram Integration v2.0 - Environment Variables
# Copy this file to .env and fill in the values

# ===========================================
# REQUIRED: Telegram Bot Configuration
# ===========================================

# Your Telegram Bot Token (get from @BotFather)
TELEGRAM_BOT_TOKEN=your_bot_token_here

# Your Telegram User ID for authorization (get from @userinfobot)
# Set to 0 to allow all users (not recommended for production)
ALLOWED_USER_ID=123456789

# ===========================================
# OPTIONAL: Multi-user authorization (bot layer)
# ===========================================

# Persistent auth database path inside container (mounted via docker-compose volume)
TG_AUTH_DB_PATH=/app/data/auth.json

# Allow users to request/register by default (admin can toggle via /registration)
TG_REGISTRATION_ENABLED=1

# ===========================================
# OPTIONAL: Performance (multi-user)
# ===========================================

# Max number of Telegram updates processed concurrently
TG_CONCURRENT_UPDATES=8

# Telegram Bot API HTTP connection pool size
TG_CONNECTION_POOL_SIZE=64

# Seconds to wait for a free connection from the pool
TG_POOL_TIMEOUT=30

# ===========================================
# OPTIONAL: Telegram streaming / typing
# ===========================================

# Enable "typing..." and progressive message edits (requires plugin streaming endpoint)
# 1=true, 0=false
TELEGRAM_STREAM_RESPONSES=1

# How often to edit the in-progress message (ms)
TELEGRAM_STREAM_EDIT_INTERVAL_MS=750

# How often to send chat action "typing" (ms)
TELEGRAM_TYPING_INTERVAL_MS=3500

# Placeholder message shown before any tokens arrive
TELEGRAM_STREAM_PLACEHOLDER=输入中...

# ===========================================
# REQUIRED: LLM API Configuration
# ===========================================

# LLM API URL (OpenAI-compatible endpoint)
# Default: https://api.openai.com/v1
# Examples:
#   - OpenRouter: https://openrouter.ai/api/v1
#   - Azure: https://YOUR_RESOURCE.openai.azure.com
#   - Local: http://localhost:5001/v1
LLM_API_URL=https://api.openai.com/v1

# LLM API Key (REQUIRED)
LLM_API_KEY=your_openai_api_key_here

# LLM Model name
# OpenAI: gpt-4o-mini, gpt-4o, gpt-4-turbo
# OpenRouter: anthropic/claude-3-sonnet, etc.
LLM_MODEL=gpt-4o-mini

# Maximum tokens for AI response
LLM_MAX_TOKENS=2048

# Temperature (0.0-2.0, higher = more creative)
LLM_TEMPERATURE=0.9

# ===========================================
# OPTIONAL: TTS / Voice replies (plugin-side)
# ===========================================

# Voice replies are toggled per-user from the Telegram main menu.
# This section configures the plugin endpoint /tts (OpenAI-compatible /audio/speech).

# TTS provider:
# - plugin: call SillyTavern plugin `/tts` (OpenAI-compatible /v1/audio/speech)
# - edge: 免费 Edge TTS（模拟 Microsoft Translator 签名，无需 API Key）
TTS_PROVIDER=edge

# TTS API URL (defaults to LLM_API_URL if empty)
TTS_API_URL=

# TTS API Key (defaults to LLM_API_KEY if empty)
TTS_API_KEY=

# TTS model / voice (required to generate voice)
TTS_MODEL=
TTS_VOICE=

# Recommended: opus (Telegram voice note)
TTS_FORMAT=opus

# Edge TTS 配置（TTS_PROVIDER=edge 时生效）
EDGE_TTS_DEFAULT_VOICE=zh-CN-XiaoxiaoMultilingualNeural
EDGE_TTS_DEFAULT_STYLE=general
EDGE_TTS_DEFAULT_RATE=0
EDGE_TTS_DEFAULT_PITCH=0
EDGE_TTS_OUTPUT_FORMAT=audio-24khz-48kbitrate-mono-mp3

# Max chars sent to TTS per reply (bot-side safety)
TG_TTS_MAX_CHARS=1500

# Optional: voice/speaker choices shown in the Telegram menu (comma-separated)
# Supports `voice`, `voice|label`, or `voice=label` entries.
# Example (AI Hobbyist TTS): 丹瑾_ZH,丽维_ZH
# Example (labeled): zh-CN-XiaoxiaoNeural=晓晓,zh-CN-YunxiNeural=云希
TG_TTS_CHOICES=zh-CN-XiaoxiaoNeural=晓晓,zh-CN-YunxiNeural=云希,zh-CN-YunjianNeural=云健,zh-CN-XiaoyiNeural=晓伊,zh-CN-YunyangNeural=云扬,zh-CN-XiaochenNeural=晓辰,zh-CN-XiaochenMultilingualNeural=晓辰 多语言,zh-CN-XiaohanNeural=晓涵,zh-CN-XiaomengNeural=晓梦,zh-CN-XiaomoNeural=晓墨,zh-CN-XiaoqiuNeural=晓秋,zh-CN-XiaorouNeural=晓柔,zh-CN-XiaoruiNeural=晓睿,zh-CN-XiaoshuangNeural=晓双,zh-CN-XiaoxiaoDialectsNeural=晓晓 方言,zh-CN-XiaoxiaoMultilingualNeural=晓晓 多语言,zh-CN-XiaoyanNeural=晓颜,zh-CN-XiaoyouNeural=晓悠,zh-CN-XiaoyuMultilingualNeural=晓宇 多语言,zh-CN-XiaozhenNeural=晓甄,zh-CN-YunfengNeural=云枫,zh-CN-YunhaoNeural=云皓,zh-CN-YunjieNeural=云杰,zh-CN-YunxiaNeural=云夏,zh-CN-YunyeNeural=云野,zh-CN-YunyiMultilingualNeural=云逸 多语言,zh-CN-YunzeNeural=云泽,zh-CN-YunfanMultilingualNeural=Yunfan Multilingual,zh-CN-YunxiaoMultilingualNeural=Yunxiao Multilingual

# ===========================================
# OPTIONAL: Default Preset
# ===========================================

# Default preset name (must exist in data/default-user/OpenAI Settings/)
# If not found, uses built-in defaults
PRESET_NAME=Default

# ===========================================
# OPTIONAL: Context Configuration
# ===========================================

# Maximum context size (tokens) for conversation history
CONTEXT_SIZE=8192

# Default World Info / Lorebook name (optional)
# Must exist in data/default-user/worlds/
DEFAULT_WORLD_INFO=

# ===========================================
# OPTIONAL: Webhook Configuration
# ===========================================

# Webhook URL (required for production deployment)
# Leave empty to use polling mode (for testing)
WEBHOOK_URL=

# ===========================================
# OPTIONAL: Logging
# ===========================================

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# ===========================================
# OPTIONAL: SillyTavern Basic Auth
# ===========================================

# If you enable basicAuthMode in config.yaml, set the same credentials here
# This allows the Bot to access SillyTavern API with authentication
ST_AUTH_USER=admin
ST_AUTH_PASS=your_password_here
